<!DOCTYPE html>
<html>

<head>
	<meta http-equiv="content-type" content="text/html;charset=UTF-8" />
	<meta charset="utf-8" />
	<title>List of Awesome</title>
	<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
	<link rel="apple-touch-icon" href="../assets/img/favicon/apple-touch-icon.png">
	<link rel="apple-touch-icon" sizes="76x76" href="../assets/img/favicon/apple-touch-icon.png">
	<link rel="apple-touch-icon" sizes="120x120" href="../assets/img/favicon/apple-touch-icon.png">
	<link rel="apple-touch-icon" sizes="152x152" href="../assets/img/favicon/apple-touch-icon.png">
	<link rel="apple-touch-icon" sizes="180x180" href="../assets/img/favicon/apple-touch-icon.png">
	<link rel="icon" type="image/png" sizes="32x32" href="../assets/img/favicon/favicon-32x32.png">
	<link rel="icon" type="image/png" sizes="16x16" href="../assets/img/favicon/favicon-16x16.png">
	<link rel="icon" type="image/x-icon" href="../assets/img/favicon/favicon.ico" />
	<link rel="manifest" href="../assets/img/favicon/site.webmanifest">
	<meta name="msapplication-TileColor" content="#da532c">
	<meta name="theme-color" content="#ffffff">

	<meta name="apple-mobile-web-app-capable" content="yes">
	<meta name="apple-touch-fullscreen" content="yes">
	<meta name="apple-mobile-web-app-status-bar-style" content="default">
	<meta content="" name="description" />
	<meta content="Luke Vink" name="author" />

	<link href="assets/plugins/pace/pace-theme-flash.css" rel="stylesheet" type="text/css" />
	<link href="assets/plugins/bootstrap/css/bootstrap.min.css" rel="stylesheet" type="text/css" />
	<link href="assets/plugins/font-awesome-5/css/all.css" rel="stylesheet" type="text/css" />
	<link href="assets/plugins/jquery-scrollbar/jquery.scrollbar.css" rel="stylesheet" type="text/css" media="screen" />
	<link href="assets/plugins/select2/css/select2.min.css" rel="stylesheet" type="text/css" media="screen" />

	<link href="assets/plugins/codrops-dialogFx/dialog.css" rel="stylesheet" type="text/css" media="screen" />
	<link href="assets/plugins/codrops-dialogFx/dialog-sandra.css" rel="stylesheet" type="text/css" media="screen" />
	<link href="assets/plugins/owl-carousel/assets/owl.carousel.css" rel="stylesheet" type="text/css" media="screen" />
	<link href="assets/plugins/jquery-nouislider/jquery.nouislider.css" rel="stylesheet" type="text/css" media="screen" />

	<link type="text/css" rel="stylesheet" href="assets/plugins/jquery-datatable/media/css/jquery.dataTables.css">
	<link type="text/css" rel="stylesheet" href="assets/plugins/jquery-datatable/extensions/FixedColumns/css/dataTables.fixedColumns.min.css">
	<link media="screen" type="text/css" rel="stylesheet" href="assets/plugins/datatables-responsive/css/datatables.responsive.css">
	<link rel="stylesheet" href="assets/plugins/swiper6.4.15/swiper-bundle.min.css" />

	<link class="main-stylesheet" href="pages/css/themes/achtung.css" rel="stylesheet" type="text/css" />
	<link class="main-stylesheet" href="assets/css/style.css" rel="stylesheet" type="text/css" />


    <!-- update the version number as needed -->
    <script defer="" src="/__/firebase/8.2.9/firebase-app.js"></script>
    <!-- include only the Firebase features as you need -->
    <script defer="" src="/__/firebase/8.2.9/firebase-auth.js"></script>
    <script defer="" src="/__/firebase/8.2.9/firebase-database.js"></script>
    <script defer="" src="/__/firebase/8.2.9/firebase-firestore.js"></script>
    <script defer="" src="/__/firebase/8.2.9/firebase-functions.js"></script>
    <script defer="" src="/__/firebase/8.2.9/firebase-messaging.js"></script>
    <script defer="" src="/__/firebase/8.2.9/firebase-storage.js"></script>
    <script defer="" src="/__/firebase/8.2.9/firebase-analytics.js"></script>
    <script defer="" src="/__/firebase/8.2.9/firebase-remote-config.js"></script>
    <script defer="" src="/__/firebase/8.2.9/firebase-performance.js"></script>
    <!--
      initialize the SDK after all desired features are loaded, set useEmulator to false
      to avoid connecting the SDK to running emulators.
    -->
    <script defer="" src="/__/firebase/init.js?useEmulator=true"></script>


</head>

<body class="fixed-header menu-pin menu-behind">
	<!-- BEGIN SIDEBAR -->
	    <!-- BEGIN SIDEBPANEL-->
    <nav class="page-sidebar" data-pages="sidebar">
      <!-- BEGIN SIDEBAR MENU TOP TRAY CONTENT-->
      <div class="sidebar-overlay-slide from-top" id="appMenu">
      </div>
      <!-- END SIDEBAR MENU TOP TRAY CONTENT-->
      <!-- BEGIN SIDEBAR MENU HEADER-->
      <div class="sidebar-header">
<!--
        <img src="assets/img/logo_white.png" alt="logo" class="brand" data-src="assets/img/logo_white.png" data-src-retina="assets/img/logo_white_2x.png" width="78" height="22">
        <div class="sidebar-header-controls">
          <button aria-label="Toggle Drawer" type="button" class="btn btn-icon-link invert sidebar-slide-toggle m-l-20 m-r-10" data-pages-toggle="#appMenu">
						<i class="pg-icon">chevron_down</i>
          </button>
          <button aria-label="Pin Menu" type="button" class="btn btn-icon-link invert d-lg-inline-block d-xlg-inline-block d-md-inline-block d-sm-none d-none" data-toggle-pin="sidebar">
						<i class="pg-icon"></i>
          </button>
        </div>
-->
      </div>
      <!-- END SIDEBAR MENU HEADER-->
      <!-- START SIDEBAR MENU -->
      <div class="sidebar-menu">
        <!-- BEGIN SIDEBAR MENU ITEMS-->
        <ul class="menu-items">
	        <li class="m-t-30 active" >
            <a href="javascript:;">
              <span class="title">All People</span>
              <span class=" arrow"></span>
            </a>
            <span class="icon-thumbnail"><i class="pg-icon">users</i></span>
            <ul class="sub-menu">
              <li id="menu-list" class="active switchToList">
                <a href="#">List</a>
                <span class="icon-thumbnail"><i class="pg-icon">list_bullets</i></span>
              </li>
              <li id="menu-grid" class="switchToGrid">
                <a href="#">Grid</a>
                <span class="icon-thumbnail"><i class="pg-icon">grid</i></span>
              </li>
          	</ul>
          </li>
		  <li class="">
            <a href="/review">
              <span class="title">Needs Review</span>
            </a>
            <span class="icon-thumbnail "><i class="pg-icon">star</i></span>
          </li>
          <li class="">
            <a href="/add">
              <span class="title">Add Person</span>
            </a>
            <span class="icon-thumbnail "><i class="pg-icon">user_add</i></span>
          </li>
					<li class="">
            <a href="/settings">
              <span class="title">Settings</span>
            </a>
            <span class="icon-thumbnail "><i class="pg-icon">cog</i></span>
          </li>
        </ul>
        <div class="clearfix"></div>
      </div>
      <!-- END SIDEBAR MENU -->
    </nav>
    <!-- END SIDEBAR -->
	<!-- END SIDEBAR -->
	<!-- START PAGE-CONTAINER -->
	<div class="page-container">
		<!-- START PAGE HEADER WRAPPER -->
		<!-- START HEADER -->
		<div class="header ">
			<!-- START MOBILE SIDEBAR TOGGLE -->
				<a href="#" class="btn-link toggle-sidebar d-lg-none pg-icon btn-icon-link" data-toggle="sidebar">
				menu</a>
			<!-- END MOBILE SIDEBAR TOGGLE -->
			<div class="">
				<div class="brand inline  m-l-10 ">
					<img src="assets/img/logo.png" alt="logo" data-src="assets/img/logo.png" data-src-retina="assets/img/logo.png" height="50">
				</div>

<!-- 				<a href="#" class="search-link d-lg-inline-block d-none" style="margin-left:50px;" data-toggle="search"><i class="pg-icon">search</i>Type anywhere to <span class="bold">search</span></a> -->
			</div>
			<div class="d-flex align-items-center">

				<!-- START User Info-->
				<div class="dropdown pull-right d-lg-block">
					<button class="profile-dropdown-toggle" type="button" data-toggle="dropdown" aria-haspopup="true"
						aria-expanded="false" aria-label="profile dropdown">
						<span class="thumbnail-wrapper d32 circular inline">
							<img src="assets/img/profiles/0.png"  width="32" height="32">
						</span>
					</button>
					<div class="dropdown-menu dropdown-menu-right profile-dropdown" role="menu">
						<a href="#" class="dropdown-item"><span>Signed in as <br /><b><span id="account-name">Achtung!<span></b></span></a>
						<div class="dropdown-divider"></div>
						<a class="dropdown-item">Settings</a>
						<a id="sign-out" class="dropdown-item">Sign Out</a>
					</div>
				</div>
				<!-- END User Info-->
<!--
				<a href="#" class="header-icon m-l-5 sm-no-margin d-inline-block" data-toggle="quickview"
					data-toggle-element="#quickview">
					<i class="pg-icon btn-icon-link">menu_add</i>
				</a>
-->
			</div>
		</div>
		<!-- END HEADER -->
		<!-- END PAGE HEADER WRAPPER -->
		<!-- START PAGE CONTENT WRAPPER -->
		<div class="page-content-wrapper">
			<!-- START PAGE CONTENT -->
			<div class="content">

				<!-- START CONTAINER FLUID -->
				<div class="container-fluid container-fixed-lg">
					<!-- BEGIN PlACE PAGE CONTENT HERE -->


					<div class="row d-flex" style="margin-top:24px;">
						<div class="col-md-2 m-none" style="overflow:;">
							<h4> All People </h4>
						</div>
						<div class="col-md-10 m-centered" style="text-align:right">

							<div class="btn-group btn-group-toggle" data-toggle="buttons">
									<label class="btn btn-default btn-huge switchToList active">
										<input type="radio" name="options" id="option1" checked="">
										<span class="icon-thumbnail no-margin"><i class="pg-icon">list_bullets</i></span>
									</label>
									<label class="btn btn-default btn-huge switchToGrid" style="text-align:center;" >
										<input type="radio" name="options" id="option2">
										<span class="icon-thumbnail no-margin"><i class="pg-icon">grid</i></span>
									</label>
							</div>

							<a href="/add" id="add-row"  class="btn btn-primary btn-huge "><span class="icon-thumbnail "><i class="pg-icon">user_add</i></span>Add someone awesome</a>

						</div>
					</div>

 					<div class="search-wrapper">
						<input type="text" id="search-table-full" class="form-control pull-right" placeholder="Search">
					</div>

					<div id="contactTableWrapper">
						<table id="contactsTable"  class="table table-hover" cellspacing="0" width="100%">
						    <thead>
						        <tr>
						            <th>Name</th>
						            <th>Position</th>
						            <th>Location</th>
						            <th>Email</th>
						            <th>Skills</th>
												<th>Worked On</th>
												<th class="no-sort">links</th>
						            <th class="no-sort"></th>
						        </tr>
						    </thead>
						    <tbody>
								</tbody>
					</table>
				</div>

				<div id="contactsGridWrapper" class="hideMe">
					<div id="contactsGrid">


					</div>
				</div>


					<!-- END PLACE PAGE CONTENT HERE -->
				</div>
				<!-- END CONTAINER FLUID -->
			</div>
			<!-- END PAGE CONTENT -->
			<!-- START FOOTER -->
<!--
			<div class="container-fluid container-fixed-lg footer">
				<div class="copyright sm-text-center">
					<p class="small no-margin pull-left sm-pull-reset">
						<span class="hint-text">Copyright © 2014</span>
						<span class="font-montserrat">REVOX</span>.
						<span class="hint-text">All rights reserved.</span>
						<span class="sm-block"><a href="#" class="m-l-10 m-r-10">Terms of use</a> | <a href="#"
								class="m-l-10">Privacy Policy</a>
						</span>
					</p>
					<p class="small no-margin pull-right sm-pull-reset">
						<a href="#">Hand-crafted</a>
						<span class="hint-text">&amp; Made with Love ®</span>
					</p>
					<div class="clearfix"></div>
				</div>
			</div>
-->
			<!-- END FOOTER -->
		</div>
		<!-- END PAGE CONTENT WRAPPER -->
	</div>
	<!-- END PAGE CONTAINER -->



	<!-- CONTACT MODAL -->
	<div class="modal fade slide-up" id="modalContactView" tabindex="-1" role="dialog" aria-labelledby="modalSlideUpLabel" aria-hidden="false">
	    <div class="modal-dialog modal-lg">
	        <div class="modal-content-wrapper ">
	        <div class="modal-content">
							<div class="modal-header clearfix text-left"  style="margin-bottom:30px;">
							  <button aria-label="" type="button" class="close" data-dismiss="modal" aria-hidden="true"><i class="pg-icon">close</i></button>
								<div class="container" style="padding:0!important">
									<div class="row no-gutters" >
										<div class="col-xs-8 col-sm-8 col-md-8 col-lg-8">
								      <h3><span id="modal-info-name" class="semi-bold" >John Smith</span></h3>
											<h6><i class="pg-icon" style="vertical-align: bottom; margin-right:10px;">user</i><span id="modal-info-position">Accountant</span></h6>
											<h6><i class="pg-icon" style="vertical-align: bottom; margin-right:10px;">map</i><span id="modal-info-location">Accountant</span></h6>

										</div>
										<div class="col-xs-4 col-sm-4 col-md-4 col-lg-4">
											<div class="flex-center-right">
												<div id="modal-info-profileImage" class="avatar" style=""></div>
											</div>
										</div>
								  </div>
								</div>
						  </div>
	            <div class="modal-body">
								<div class="container" style="padding:0!important">

										<div class="form-group input-group copy-input">
														<div class="input-group-prepend">
                        		<span class="input-group-text transparent left-icon"><i class="pg-icon">email</i>	</span>
													</div>
										       <input id="modal-info-email" type="text" value="email@gmail.com" class="form-control">
										       <div class="input-group-append">
										          <span class="input-group-text copy-icon"><i class="pg-icon">copy</i></span>
										       </div>
										</div>
										<div class="form-group input-group copy-input">
														<div class="input-group-prepend">
                        		<span class="input-group-text transparent left-icon"> <i class="fas fa-phone-alt"></i> 	</span>
													</div>
										       <input id="modal-info-phone" type="text" value="+3161234567" class="form-control">
										       <div class="input-group-append">
										          <span class="input-group-text copy-icon"> <i class="pg-icon">copy</i></span>
										       </div>
										</div>

										<p class="bold separator">Links</p>
											<a href="" class="btn btn-block btn-default btn-lg btn-icon-right">
												<span id="modal-info-website" style="text-align:left">Website</span>
												<i class="pg-icon md-18">arrow_right</i>
											</a>
												<a href="" class="btn btn-block btn-default btn-lg btn-icon-right ">
													<span id="modal-info-linkedin" style="text-align:left">LinkedIn</span>
													<i class="pg-icon md-18">arrow_right</i>
												</a>
												<a href="" class="btn btn-block btn-default btn-lg btn-icon-right">
													<span id="modal-info-instagram" style="text-align:left">Instagram</span>
													<i class="pg-icon md-18">arrow_right</i>
												</a>

											<p class="bold separator">Work</p>
											<div class="form-group form-group-default no-focus">
												<div class="form-group-prepend-text"> Skills: </div>
												<div class="tags" id="modal-info-skills">
													<button class="btn btn-chip">Editor</button>
													 <button class="btn btn-chip">Motion</button>
													 <button class="btn btn-chip">Film</button>
												</div>
											</div>
											<div class="form-group form-group-default no-focus">
												<div class="form-group-prepend-text"> Worked on: </div>
												<div class="tags" id="modal-info-workedOn">
													<button class="btn btn-chip">Volkswagen</button>
													 <button class="btn btn-chip">Stuff</button>
												</div>
											</div>

												<!-- Slider main container -->
												<!-- <div id="workSwiper" class="swiper-container">
											     <div class="swiper-wrapper">
											       <div class="swiper-slide" style="background-image: url('assets/img/profiles/0.png')"></div>
											     </div>
											     <div class="swiper-pagination"></div>
											  </div> -->

								</div>
	            </div>
	        </div>
	        </div>
	    </div>
	</div>
	<!-- /.CONTACT MODAL -->


	<!-- START DIALOG -->
	<div id="itemDetails" class="dialog item-details">
		<div class="dialog__overlay"></div>
		<div class="dialog__content">
			<div class="container-fluid">
				<div class="row dialog__overview">
					<div id="workColumn" class="col-md-6 no-padding item-slideshow-wrapper">

						<div id="workSwiper" class="swiper-container">
							 <div class="swiper-wrapper"></div>
							 <div class="swiper-pagination"></div>
						</div>
					</div>

					<div id="infoColumn" class="col-md-6 p-r-35 p-t-35 p-l-35 p-b-35 full-height item-description">

						<div class="container" style="padding:0 0 30px 0!important">
							<div class="row no-gutters" >
								<div class="col-8">
									<h3><span id="dialog-info-name" class="semi-bold" >John Smith</span></h3>
									<h6><i class="pg-icon" style="vertical-align: bottom; margin-right:10px;">user</i><span id="modal-info-position">Accountant</span></h6>
									<h6><i class="pg-icon" style="vertical-align: bottom; margin-right:10px;">map</i><span id="modal-info-location">Accountant</span></h6>

								</div>
								<div class="col-4">
									<div class="flex-center-right">
										<div id="dialog-info-profileImage" class="avatar" style=""></div>
									</div>
								</div>
							</div>
						</div>

						<div class="container" style="padding:0!important">

								<div class="form-group input-group copy-input">
												<div class="input-group-prepend">
												<span class="input-group-text transparent left-icon"><i class="pg-icon">email</i>	</span>
											</div>
											 <input id="dialog-info-email" type="text" value="email@gmail.com" class="form-control">
											 <div class="input-group-append">
													<span class="input-group-text copy-icon"><i class="pg-icon">copy</i></span>
											 </div>
								</div>
								<div class="form-group input-group copy-input">
												<div class="input-group-prepend">
												<span class="input-group-text transparent left-icon"> <i class="fas fa-phone-alt"></i> 	</span>
											</div>
											 <input id="dialog-info-phone" type="text" value="+3161234567" class="form-control">
											 <div class="input-group-append">
													<span class="input-group-text copy-icon"> <i class="pg-icon">copy</i></span>
											 </div>
								</div>

								<p class="bold separator">Links</p>

									<a id="dialog-info-website" href="" target="_blank"  class="btn btn-block btn-default btn-lg btn-icon-right">
										<span  style="text-align:left">Website</span>
										<i class="pg-icon md-18">arrow_right</i>
									</a>
										<a id="dialog-info-linkedin" href="" target="_blank"  class="btn btn-block btn-default btn-lg btn-icon-right ">
											<span style="text-align:left">LinkedIn</span>
											<i class="pg-icon md-18">arrow_right</i>
										</a>
										<a id="dialog-info-instagram" href="" target="_blank" class="btn btn-block btn-default btn-lg btn-icon-right">
											<span style="text-align:left">Instagram</span>
											<i class="pg-icon md-18">arrow_right</i>
										</a>

									<p class="bold separator">Work</p>
									<div class="form-group form-group-default no-focus">
										<div class="form-group-prepend-text"> Skills: </div>
										<div class="tags" id="dialog-info-skills">
											<button class="btn btn-chip">Editor</button>
											 <button class="btn btn-chip">Motion</button>
											 <button class="btn btn-chip">Film</button>
										</div>
									</div>
									<div class="form-group form-group-default no-focus">
										<div class="form-group-prepend-text"> Worked on: </div>
										<div class="tags" id="dialog-info-workedOn">
											<button class="btn btn-chip">Volkswagen</button>
											 <button class="btn btn-chip">Stuff</button>
										</div>
									</div>



						</div>


					</div>
				</div>

			</div>
			<button aria-label="" class="close action top-right" data-dialog-close><i class="pg-close fs-14"></i>
			</button>
		</div>
	</div>
	<!-- END DIALOG -->


	<!-- BEGIN VENDOR JS -->
	    <!-- BEGIN VENDOR JS -->
    <script src="assets/plugins/pace/pace.min.js" type="text/javascript"></script>
    <script src="assets/plugins/jquery/jquery-3.2.1.min.js" type="text/javascript"></script>
    <script src="assets/plugins/modernizr.custom.js" type="text/javascript"></script>
    <script src="assets/plugins/jquery-ui/jquery-ui.min.js" type="text/javascript"></script>
    <script src="assets/plugins/popper/umd/popper.min.js" type="text/javascript"></script>
    <script src="assets/plugins/bootstrap/js/bootstrap.min.js" type="text/javascript"></script>
    <script src="assets/plugins/jquery/jquery-easy.js" type="text/javascript"></script>
    <script src="assets/plugins/jquery-unveil/jquery.unveil.min.js" type="text/javascript"></script>
    <script src="assets/plugins/jquery-ios-list/jquery.ioslist.min.js" type="text/javascript"></script>
    <script src="assets/plugins/jquery-actual/jquery.actual.min.js"></script>
    <script src="assets/plugins/jquery-scrollbar/jquery.scrollbar.min.js"></script>
    <script type="text/javascript" src="assets/plugins/jquery-datatable/media/js/jquery.dataTables.min.js"></script>
		<script type="text/javascript" src="assets/plugins/jquery-datatable/extensions/TableTools/js/dataTables.tableTools.min.js"></script>
		<script type="text/javascript" src="assets/plugins/jquery-datatable/extensions/Bootstrap/jquery-datatable-bootstrap.js"></script>
		<script src="assets/plugins/datatables-responsive/js/datatables.responsive.js" type="text/javascript"></script>
		<script src="assets/plugins/datatables-responsive/js/lodash.min.js" type="text/javascript"></script>

		<script src="assets/plugins/jquery-metrojs/MetroJs.min.js" type="text/javascript"></script>
		<script type="text/javascript" src="assets/plugins/classie/classie.js"></script>
			<script src="assets/plugins/imagesloaded/imagesloaded.pkgd.min.js"></script>
			<script src="assets/plugins/jquery-isotope/isotope.pkgd.min.js" type="text/javascript"></script>
			<script src="assets/plugins/codrops-dialogFx/dialogFx.js" type="text/javascript"></script>
			<script src="assets/plugins/owl-carousel/owl.carousel.min.js" type="text/javascript"></script>
			<script src="assets/plugins/jquery-nouislider/jquery.nouislider.min.js" type="text/javascript"></script>
			<script src="assets/plugins/jquery-nouislider/jquery.liblink.js" type="text/javascript"></script>


		<script src="assets/plugins/swiper6.4.15/swiper-bundle.min.js"></script>

    <!-- END VENDOR JS -->
    <!-- BEGIN CORE TEMPLATE JS -->
    <script src="pages/js/pages.min.js" type="text/javascript"></script>
    <!-- END CORE TEMPLATE JS -->
	<!-- BEGIN PAGE LEVEL JS -->
	<script src="assets/js/scripts.js" type="text/javascript"></script>


	<!-- LoginETC -->
	<script>


		var swiper;
		var currentPersonUid;

		//////////////////////// INIT TABLE /////////////////////////

		var settings = {
							"sDom": "<t><'row'<p i>>",
							"destroy": true,
							"scrollCollapse": true,
							"oLanguage": {
									"sLengthMenu": "_MENU_ ",
									"sInfo": "Showing <b>_START_ to _END_</b> of _TOTAL_ entries"
							},
							"scrollX": true,
					bLengthChange : false,
					lengthChange: false,
					"pagingType": "numbers",
					columnDefs: [
					 { orderable: false, targets: -1 }
				 ],
				 'createdRow': function(row, data, dataIndex){
			      $('td:eq(6)', row).css('min-width', '106px');
			   }
		};

		var contactsTable = $('#contactsTable').DataTable(settings);



		// search box for table
		$('#search-table-full').keyup(function() {
			contactsTable.search($(this).val()).draw();
		});




		//////////////////////// USER HANDLING /////////////////////////

		document.addEventListener('DOMContentLoaded', function() {
			const db = firebase.firestore();
			//
			// db.collection("users").get().then((querySnapshot) => {
			// 		querySnapshot.forEach((doc) => {
			// 				// doc.data() is never undefined for query doc snapshots
			// 				console.log(doc.id, " => ", doc.data());
			// 		});
			// });






			firebase.auth().onAuthStateChanged((user) => {
				if(user){
					var userdoc = db.collection("users").doc(user.uid).get().then((doc) => {
					    if (doc.exists) {
									$('#account-name').html(doc.data().firstName + ' ' + doc.data().lastName);
					    } else {
					        console.log("No such document!");
					    }
					}).catch((error) => {
					    console.log("Error getting document:", error);
					});

				} else {
					window.location.href = '/login';
				}
			});

			$('#sign-out').click(function() {
					firebase.auth().signOut();
			});

			$('.switchToGrid').click(function() {
					$('#contactTableWrapper').addClass('hideMe');
					$('.switchToList').removeClass('active');
					$('.switchToGrid').addClass('active');
					setTimeout(function () {
						$('#contactTableWrapper').hide();
						$('#contactsGridWrapper').show();
						setTimeout(function () {
							$('#contactsGridWrapper').removeClass('hideMe');
						}, 5);
					}, 301);
			});

			$('.switchToList').click(function() {
				$('#contactsGridWrapper').addClass('hideMe');
				$('.switchToList').addClass('active');
				$('.switchToGrid').removeClass('active');
					setTimeout(function () {
						$('#contactsGridWrapper').hide();
						$('#contactTableWrapper').show();
						setTimeout(function () {
							$('#contactTableWrapper').removeClass('hideMe');
						}, 5);
					}, 301);
			});

			$('body').on('click', '#contactsTable tr', function() {
					var uid = $(this).attr('data-uid');
					// console.log($(this).attr('data-uid') || 'no uid');\
					if(uid){
						// putPersonInModal(uid);
						putPersonInDialog(uid);
					}
	    });



			// $('.item-slideshow > div').each(function() {
			// 		var img = $(this).data('image');
			// 		$(this).css({
			// 				'background-image': 'url(' + img + ')',
			// 				'background-size': 'cover'
			// 		})
			// });

			/*
					Touch enabled slideshow for gallery item images using owlCarousel
					www.owlcarousel.owlgraphic.com
			*/
			$(".item-slideshow").owlCarousel({
					items: 1,
					nav: true,
					navText: ['<i class="fa fa-chevron-left"></i>', '<i class="fa fa-chevron-right"></i>'],
					dots: true
			});


			function addContactsToTable() {

				db.collection("contacts").get().then(function(querySnapshot) {
					querySnapshot.forEach(function(doc) {
						var person = doc.data();
						//ADD TO TABLE
 						contactsTable.row.add([
							makeAvatarName(person),
							makePosition(person),
							person.location,
							person.email,
							makeTags(person.skills),
							makeTags(person.workedOn),
							makeButtons(person),
							'<button aria-label="" data-uid="'+ doc.id + '" type="button" class="btn btn-achtung btn-animated from-top"> <span> <i class="pg-icon">edit</i> </span> <span class="hidden-block"> <i class="pg-icon">edit</i> </span> </button>'
						]);

						setTimeout(function(){
							$(":button[data-uid='" + doc.id + "']").parent().parent().attr('data-uid', doc.id );

							// $(":button[data-uid='" + doc.id + "']").parent().parent().attr('data-toggle', 'modal').attr('data-target', '#modalContactView').attr('data-uid', doc.id );
						}, 50);

						if(person.profileImageUrl == ''){
							person.profileImageUrl = 'assets/img/profiles/0.png'
						}
						//ADD TO GRID
						$("#contactsGrid").append('<div class="grid-contact">' +
						'<div class="grid-contact-profile" style="background-image:url('+(person.profileImageUrl || '/img/profiles/0.png')+')"></div>'+
						'<div class="grid-contact-work">'+
						'</div>'+
						'<div class="grid-contact-info">'+
								'<h4 style="margin-bottom:2px;">' + person.firstName + ' ' + person.lastName + '</h4>' +
								'<p class="no-margin">' + makePosition(person) + '</p>' +
						'</div>'+
						'</div>');

					});
					contactsTable.draw();
					$(window).trigger('resize');


					// $('#contactsTable tr').on('click', function() {
					// 	var uid = $(this).attr('data-uid');
					// 	// console.log($(this).attr('data-uid') || 'no uid');\
					// 	if(uid){
					// 		// putPersonInModal(uid);
					// 		putPersonInDialog(uid);
					// 	}
					// });

				});

			}
			addContactsToTable();


			$('#modalContactView').on('shown.bs.modal', function (e) {
				initWorkSwiper();
				setTimeout(function () {	$('#modalContactView').css('overflow-y','auto')	}, 300);
			})
			$('#modalContactView').on('hidden.bs.modal', function (e) {
				setTimeout(function () { $('#modalContactView').css('overflow-y','hidden') }, 300);
			})

			function initWorkSwiper(){

				$(window).trigger('resize');
				swiper = new Swiper('.swiper-container', {
					slidesPerView: 1,
					centeredSlides: true,
					spaceBetween: 1,
					grabCursor: true,
					pagination: {
						el: '.swiper-pagination',
						clickable: true,
					},
					// autoplay: {
					//    delay: 3000,
					// }
				});

			}
			function putPersonInModal(uid){

				console.log(uid);
				var userdoc = db.collection("contacts").doc(uid).get().then((doc) => {
						if (doc.exists) {
								var person = doc.data();

								$('#modal-info-name').html(person.firstName + ' ' + person.lastName);
								$('#modal-info-email').val(person.email);
								if(person.phone != ''){
									$('#modal-info-phone').parent().show();
									$('#modal-info-phone').val(person.phone);
								} else {
									$('#modal-info-phone').parent().hide();
								}
								if(person.status != 'Freelancer'){
									$('#modal-info-position').html(person.jobTitle + ', ' + person.company);
								} else {
									$('#modal-info-position').html('Freelancer');
								}
								if(person.location != ''){
									$('#modal-info-location').parent().show();
									$('#modal-info-location').html(person.location);
								} else {
									$('#modal-info-location').parent().hide();
								}

								if(person.profileImageUrl != ''){
									$('#modal-info-profileImage').show();
									$('#modal-info-profileImage').css('background-image', 'url('+ person.profileImageUrl +')');
								} else {
									$('#modal-info-profileImage').hide();
								}

								if(person.website != ''){
									$('#modal-info-website').parent().show();
									$('#modal-info-website').attr("href", person.website);
								} else {
									$('#modal-info-website').parent().hide();
								}

								if(person.linkedin != ''){
									$('#modal-info-linkedin').parent().show();
									$('#modal-info-linkedin').attr("href", person.linkedin);
								} else {
									$('#modal-info-linkedin').parent().hide();
								}

								if(person.instagram != ''){
									$('#modal-info-instagram').parent().show();
									$('#modal-info-instagram').attr("href", person.instagram);
								} else {
									$('#modal-info-instagram').parent().hide();
								}

								if(person.skills != []){
									$('#modal-info-skills').empty();
									person.skills.forEach(function(skill) {
											$('#modal-info-skills').append( '<button class="btn btn-chip">'+ skill +'</button>');
									});
								}
								if(person.workedOn.length > 0){
									$('#modal-info-workedOn').parent().show();

									$('#modal-info-workedOn').empty();
									person.workedOn.forEach(function(client) {
											$('#modal-info-workedOn').append( '<button class="btn btn-chip">'+ client +'</button>');
									});
								} else {
									$('#modal-info-workedOn').parent().hide();
								}

								if(person.featuredWork){
									if(person.featuredWork.length > 0){
										$('#workSwiper').show();
										$('#workSwiper .swiper-wrapper').empty();
										$('#workColumn').empty();
										$('#workColumn').html('<div id="workSwiper" class="swiper-container"><div class="swiper-wrapper"></div><div class="swiper-pagination"></div></div>')

										person.featuredWork.forEach(function(imageUrl) {
											console.log(imageUrl);
											$('#workSwiper .swiper-wrapper').append( '<div class="swiper-slide"><div class="imageWrap" style="background-image: url('+imageUrl+')"></div></div>');
										});

										initWorkSwiper();
									} else {
										$('#workSwiper').hide();
									}
								} else {
									$('#workSwiper').hide();
								}


								//
								// if(person.workedOn != []){
								// 	$('#modal-info-workedOn').empty();
								// 	person.workedOn.forEach(function(client) {
								// 			$('#modal-info-workedOn').append( '<button class="btn btn-chip">'+ client +'</button>');
								// 	});
								// }
								// <div class="swiper-slide" style="background-image: url('assets/img/profiles/0.png')"></div>





						} else {
								console.log("No such document!");
						}
				}).catch((error) => {
						console.log("Error getting document:", error);
				});

			}


			function putPersonInDialog(uid){

				$('#itemDetails').addClass('no-work');
				$('#infoColumn').addClass('col-md-12');

				console.log(uid);
				var userdoc = db.collection("contacts").doc(uid).get().then((doc) => {

						if (doc.exists) {
								var person = doc.data();

								$('#dialog-info-name').html(person.firstName + ' ' + person.lastName);
								$('#dialog-info-email').val(person.email);
								if(person.phone != ''){
									$('#dialog-info-phone').parent().show();
									$('#dialog-info-phone').val(person.phone);
								} else {
									$('#dialog-info-phone').parent().hide();
								}
								if(person.status != 'Freelancer'){
									$('#dialog-info-position').html(person.jobTitle + ', ' + person.company);
								} else {
									$('#dialog-info-position').html('Freelancer');
								}
								if(person.location != ''){
									$('#dialog-info-location').parent().show();
									$('#dialog-info-location').html(person.location);
								} else {
									$('#dialog-info-location').parent().hide();
								}

								if(person.profileImageUrl != ''){
									$('#dialog-info-profileImage').show();
									$('#dialog-info-profileImage').css('background-image', 'url('+ person.profileImageUrl +')');
								} else {
									$('#dialog-info-profileImage').hide();
								}


								if(person.website != ''){
									$('#dialog-info-website').parent().show();
									$('#dialog-info-website').attr("href", person.website);
									} else {
									$('#dialog-info-website').parent().hide();
								}

								if(person.linkedin != ''){
									$('#dialog-info-linkedin').parent().show();
									$('#dialog-info-linkedin').attr("href", person.linkedin);
								} else {
									$('#dialog-info-linkedin').parent().hide();
								}

								if(person.instagram != ''){
									$('#dialog-info-instagram').parent().show();
									$('#dialog-info-instagram').attr("href", person.instagram);

								} else {
									$('#dialog-info-instagram').parent().hide();
								}

								if(person.skills != []){
									$('#dialog-info-skills').empty();
									person.skills.forEach(function(skill) {
											$('#dialog-info-skills').append( '<button class="btn btn-chip">'+ skill +'</button>');
									});
								}
								if(person.workedOn.length > 0){
									$('#dialog-info-workedOn').parent().show();

									$('#dialog-info-workedOn').empty();
									person.workedOn.forEach(function(client) {
											$('#dialog-info-workedOn').append( '<button class="btn btn-chip">'+ client +'</button>');
									});
								} else {
									$('#dialog-info-workedOn').parent().hide();
								}



								if(person.featuredWork){
									if(person.featuredWork.length > 0){
										$('#workSwiper').show();
										$('#workSwiper .swiper-wrapper').empty();

										$('#itemDetails').removeClass('no-work');
										$('#infoColumn').removeClass('col-md-12');
										$('#infoColumn').addClass('col-md-6');

										person.featuredWork.forEach(function(imageUrl) {
											console.log(imageUrl);
											$('#workSwiper .swiper-wrapper').append( '<div class="swiper-slide"><div class="imageWrap" style="background-image: url('+imageUrl+')"></div></div>');
										});

										initWorkSwiper();
									} else {
										$('#itemDetails').addClass('no-work');
										$('#infoColumn').addClass('col-md-12');

									}
								} else {
									$('#itemDetails').addClass('no-work');
									$('#infoColumn').addClass('col-md-12');
								}


								//
								// if(person.workedOn != []){
								// 	$('#modal-info-workedOn').empty();
								// 	person.workedOn.forEach(function(client) {
								// 			$('#modal-info-workedOn').append( '<button class="btn btn-chip">'+ client +'</button>');
								// 	});
								// }
								// <div class="swiper-slide" style="background-image: url('assets/img/profiles/0.png')"></div>


								//Show Popup
								var dlg = new DialogFx($('#itemDetails').get(0));
								dlg.toggle();


						} else {
								console.log("No such document!");
						}
				}).catch((error) => {
						console.log("Error getting document:", error);
				});

			}



			// swiper.prependSlide([
		  //   '<div class="swiper-slide">Slide ' + (--prependNumber) + '</div>',
		  //   '<div class="swiper-slide">Slide ' + (--prependNumber) + '</div>'
		  // ]);
			function makeAvatarName(person){
				if(person.profileImageUrl){
					return '<td<div class="flex-cell"><span class="thumbnail-wrapper d32 circular inline"><img src="'+ person.profileImageUrl +'" alt="" data-src="'+ person.profileImageUrl +'" data-src-retina="'+ person.profileImageUrl +'" width="32" height="32"></span><span class="name">'+ person.firstName + ' ' + person.lastName +'</span></div></td>'
				} else 	{
					return '<td<div class="flex-cell"><span class="thumbnail-wrapper d32 circular inline"></span><span class="name">'+ person.firstName + ' ' + person.lastName +'</span></div></td>'
				}
			}

			function makeButtons(person){
				var linkshtml = '';

				if(person.website != '' && person.website != undefined)
					linkshtml = linkshtml + '<a target="_blank" href="'+ person.website +'"  class="btn btn-achtung"><span> <i class="fas fa-globe-europe"></i> </span></a>'

				if(person.linkedin != '' && person.linkedin != undefined)
					linkshtml = linkshtml + '<a target="_blank" href="'+ person.linkedin +'" class="btn btn-achtung"><span> <i class="fab fa-linkedin"></i> </span></a>'

				if(person.instagram != '' && person.instagram != undefined)
					linkshtml = linkshtml + '<a target="_blank" href="'+ person.instagram +'" class="btn btn-achtung"><span> <i class="fab fa-instagram"></i> </span></a>'

				return linkshtml
			}
			function makePosition(person){
				if(person.status != 'Freelancer'){
					return 	person.jobTitle + ', ' + person.company;
				} else {
					return 	'Freelancer';
				}
			}
			function makeTags(tagArray){
				var html = '';
				tagArray.forEach(function(item) {
				    html = html + ' <button class="btn btn-chip">'+ item +'</button>';
				});
				return html
			}


			//////////////////////// HELPERS /////////////////////////

			$('.link-button').on('click', function() {


			})

			$('.copy-input').on('click', function() {
				  // finds data-clipboard-test for content p class "click"
				   copyText = $(this).find( "input" );
					 /* Select the text field */
					 copyText.select();
					 /* Copy the text inside the text field */
					 document.execCommand("copy");

					 $('body').pgNotification({
						 	style: 'bar',
							message: 'Copied to clipboard!',
							timeout: 1500,
							type: 'success',
							position: 'top'
					 }).show();

				})

			// USE JSON TO POPULATE A COLLECTION
			function json2firestore(jsonFile, colletionName) {
				$.getJSON(jsonFile, function(json) {
						$.each(json, function() {
								var clientName = JSON.stringify(this).replace(/\\"/g,"\uFFFF");
								var clientNameNoQuotes = clientName.replace(/['"]+/g, '');
								console.log(clientNameNoQuotes);
								db.collection(colletionName).add({
								    name: clientNameNoQuotes,
								}).then((docRef) => {
								    console.log("Document written with ID: ", docRef.id);
								})
								.catch((error) => {
								    console.error("Error adding document: ", error);
								});
						});

				});
			};
		 // json2firestore('clients.json',"clients");

		});// END ON DOM LOADED


	</script>
	<!-- END PAGE LEVEL JS -->
</body>

</html>
